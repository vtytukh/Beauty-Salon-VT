-- MySQL Script generated by MySQL Workbench
-- Sat Mar 25 19:06:12 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema beauty_salon_db
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `beauty_salon_db` ;

-- -----------------------------------------------------
-- Schema beauty_salon_db
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `beauty_salon_db` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `beauty_salon_db` ;

-- -----------------------------------------------------
-- Table `beauty_salon_db`.`role`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `beauty_salon_db`.`role` ;

CREATE TABLE IF NOT EXISTS `beauty_salon_db`.`role` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` ENUM('Admin', 'Master', 'Client') NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `beauty_salon_db`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `beauty_salon_db`.`user` ;

CREATE TABLE IF NOT EXISTS `beauty_salon_db`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `first_name` VARCHAR(45) NOT NULL,
  `last_name` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `password` VARCHAR(65) NOT NULL,
  `role_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_role` (`role_id` ASC) VISIBLE,
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) VISIBLE,
  CONSTRAINT `fk_user_role`
    FOREIGN KEY (`role_id`)
    REFERENCES `beauty_salon_db`.`role` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `beauty_salon_db`.`master`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `beauty_salon_db`.`master` ;

CREATE TABLE IF NOT EXISTS `beauty_salon_db`.`master` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `rate` FLOAT NULL DEFAULT '0',
  `user_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_master_user` (`user_id` ASC) VISIBLE,
  CONSTRAINT `fk_master_user`
    FOREIGN KEY (`user_id`)
    REFERENCES `beauty_salon_db`.`user` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `beauty_salon_db`.`service`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `beauty_salon_db`.`service` ;

CREATE TABLE IF NOT EXISTS `beauty_salon_db`.`service` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `beauty_salon_db`.`master_has_service`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `beauty_salon_db`.`master_has_service` ;

CREATE TABLE IF NOT EXISTS `beauty_salon_db`.`master_has_service` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `master_id` INT NOT NULL,
  `service_id` INT NOT NULL,
  `price` DECIMAL(6,2) NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_master_has_service_master` (`master_id` ASC) VISIBLE,
  INDEX `fk_master_has_service_service` (`service_id` ASC) VISIBLE,
  CONSTRAINT `fk_master_has_service_master`
    FOREIGN KEY (`master_id`)
    REFERENCES `beauty_salon_db`.`master` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_master_has_service_service`
    FOREIGN KEY (`service_id`)
    REFERENCES `beauty_salon_db`.`service` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `beauty_salon_db`.`status`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `beauty_salon_db`.`status` ;

CREATE TABLE IF NOT EXISTS `beauty_salon_db`.`status` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` ENUM('pending', 'paid', 'accepted', 'finished', 'canceled', 'feedbacked') NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `beauty_salon_db`.`record`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `beauty_salon_db`.`record` ;

CREATE TABLE IF NOT EXISTS `beauty_salon_db`.`record` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `user_id` INT NOT NULL,
  `master_has_service_id` INT NOT NULL,
  `status_id` INT NOT NULL,
  `time` TIMESTAMP(6) NOT NULL,
  `mark` FLOAT NULL DEFAULT NULL,
  `feedback` VARCHAR(255) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_record_master_has_service` (`master_has_service_id` ASC) VISIBLE,
  INDEX `fk_record_status` (`status_id` ASC) VISIBLE,
  INDEX `fk_record_user` (`user_id` ASC) INVISIBLE,
  UNIQUE INDEX `uq_record_master_time_status` (`master_has_service_id` ASC, `time` ASC, `status_id` ASC) VISIBLE,
  CONSTRAINT `fk_record_master_has_service`
    FOREIGN KEY (`master_has_service_id`)
    REFERENCES `beauty_salon_db`.`master_has_service` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_record_status`
    FOREIGN KEY (`status_id`)
    REFERENCES `beauty_salon_db`.`status` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_record_user`
    FOREIGN KEY (`user_id`)
    REFERENCES `beauty_salon_db`.`user` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `beauty_salon_db`.`role`
-- -----------------------------------------------------
START TRANSACTION;
USE `beauty_salon_db`;
INSERT INTO `beauty_salon_db`.`role` (`id`, `name`) VALUES (1, 'Admin');
INSERT INTO `beauty_salon_db`.`role` (`id`, `name`) VALUES (2, 'Master');
INSERT INTO `beauty_salon_db`.`role` (`id`, `name`) VALUES (3, 'Client');

COMMIT;


-- -----------------------------------------------------
-- Data for table `beauty_salon_db`.`user`
-- -----------------------------------------------------
START TRANSACTION;
USE `beauty_salon_db`;
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (1, 'Володимир', 'Admin', 'admin@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 1);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (2, 'Alla', 'Master', 'alla_master@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 2);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (3, 'Bohdana', 'Master', 'bohdana_master@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 2);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (4, 'Vira', 'Master', 'vira_master@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 2);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (5, 'Halyna', 'Master', 'halyna_master@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 2);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (6, 'Iryna', 'Master', 'iryna_master@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 2);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (7, 'Maryna', 'Master', 'maryna_master@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 2);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (8, 'Oksana', 'Master', 'oksana_master@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 2);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (9, 'Yana', 'Client', 'yana_client@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 3);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (10, 'Yuliia', 'Client', 'yuliia_client@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 3);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (11, 'Tamara', 'Client', 'tamara_client@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 3);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (12, 'Sofiia', 'Client', 'sofiia_client@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 3);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (13, 'Raisa', 'Client', 'raisa_client@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 3);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (14, 'Olena', 'Client', 'olena_client@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 3);
INSERT INTO `beauty_salon_db`.`user` (`id`, `first_name`, `last_name`, `email`, `password`, `role_id`) VALUES (15, 'Nadiia', 'Client', 'nadiia_client@email.com', 'd8578edf8458ce06fbc5bb76a58c5ca4', 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `beauty_salon_db`.`master`
-- -----------------------------------------------------
START TRANSACTION;
USE `beauty_salon_db`;
INSERT INTO `beauty_salon_db`.`master` (`id`, `rate`, `user_id`) VALUES (1, DEFAULT, 2);
INSERT INTO `beauty_salon_db`.`master` (`id`, `rate`, `user_id`) VALUES (2, 5, 3);
INSERT INTO `beauty_salon_db`.`master` (`id`, `rate`, `user_id`) VALUES (3, 3, 4);
INSERT INTO `beauty_salon_db`.`master` (`id`, `rate`, `user_id`) VALUES (4, 4, 5);
INSERT INTO `beauty_salon_db`.`master` (`id`, `rate`, `user_id`) VALUES (5, 5, 6);
INSERT INTO `beauty_salon_db`.`master` (`id`, `rate`, `user_id`) VALUES (6, 4, 7);
INSERT INTO `beauty_salon_db`.`master` (`id`, `rate`, `user_id`) VALUES (7, DEFAULT, 8);

COMMIT;


-- -----------------------------------------------------
-- Data for table `beauty_salon_db`.`service`
-- -----------------------------------------------------
START TRANSACTION;
USE `beauty_salon_db`;
INSERT INTO `beauty_salon_db`.`service` (`id`, `name`, `description`) VALUES (1, 'Стрижка', 'Тільки стерильний інструмент.');
INSERT INTO `beauty_salon_db`.`service` (`id`, `name`, `description`) VALUES (2, 'Корекція форми', 'Постійні навчання і атестація персоналу.');
INSERT INTO `beauty_salon_db`.`service` (`id`, `name`, `description`) VALUES (3, 'Стрижка чубчика', 'Приємна атмосфера з радіо.');
INSERT INTO `beauty_salon_db`.`service` (`id`, `name`, `description`) VALUES (4, 'Експрес-зачіска', 'Буденна експрес-зачіска.');
INSERT INTO `beauty_salon_db`.`service` (`id`, `name`, `description`) VALUES (5, 'Брашинг-накрутка', 'Термозахист для волосся.');
INSERT INTO `beauty_salon_db`.`service` (`id`, `name`, `description`) VALUES (6, 'Вечірня зачіска', 'Елегантна вечірня зачіска.');
INSERT INTO `beauty_salon_db`.`service` (`id`, `name`, `description`) VALUES (7, 'Фарбування просте', 'Кращі бренди матеріалів і барвників.');
INSERT INTO `beauty_salon_db`.`service` (`id`, `name`, `description`) VALUES (8, 'Фарбування коренів', 'Фарбування коренів для омолодження.');

COMMIT;


-- -----------------------------------------------------
-- Data for table `beauty_salon_db`.`master_has_service`
-- -----------------------------------------------------
START TRANSACTION;
USE `beauty_salon_db`;
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (1, 1, 1, 849.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (2, 2, 1, 849.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (3, 3, 1, 849.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (4, 1, 2, 599.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (5, 2, 2, 599.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (6, 3, 2, 599.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (7, 1, 3, 599.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (8, 2, 3, 599.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (9, 3, 3, 599.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (10, 4, 4, 499.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (11, 5, 4, 499.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (12, 5, 5, 599.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (13, 4, 6, 599.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (14, 5, 6, 599.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (15, 6, 7, 1800.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (16, 7, 7, 1900.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (17, 6, 8, 1600.00);
INSERT INTO `beauty_salon_db`.`master_has_service` (`id`, `master_id`, `service_id`, `price`) VALUES (18, 7, 8, 1700.00);

COMMIT;


-- -----------------------------------------------------
-- Data for table `beauty_salon_db`.`status`
-- -----------------------------------------------------
START TRANSACTION;
USE `beauty_salon_db`;
INSERT INTO `beauty_salon_db`.`status` (`id`, `name`) VALUES (1, 'pending');
INSERT INTO `beauty_salon_db`.`status` (`id`, `name`) VALUES (2, 'paid');
INSERT INTO `beauty_salon_db`.`status` (`id`, `name`) VALUES (3, 'accepted');
INSERT INTO `beauty_salon_db`.`status` (`id`, `name`) VALUES (4, 'finished');
INSERT INTO `beauty_salon_db`.`status` (`id`, `name`) VALUES (5, 'canceled');
INSERT INTO `beauty_salon_db`.`status` (`id`, `name`) VALUES (6, 'feedbacked');

COMMIT;


-- -----------------------------------------------------
-- Data for table `beauty_salon_db`.`record`
-- -----------------------------------------------------
START TRANSACTION;
USE `beauty_salon_db`;
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (1, 9, 2, 4, '2023-01-25 09:00:00.000000', DEFAULT, 'DEFAULT');
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (2, 10, 3, 4, '2023-01-25 09:00:00.000000', DEFAULT, 'DEFAULT');
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (3, 11, 5, 4, '2023-01-25 10:00:00.000000', DEFAULT, 'DEFAULT');
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (4, 12, 6, 4, '2023-01-25 11:00:00.000000', DEFAULT, 'DEFAULT');
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (5, 13, 4, 5, '2023-01-25 12:00:00.000000', DEFAULT, 'DEFAULT');
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (6, 14, 7, 4, '2023-01-26 09:00:00.000000', DEFAULT, 'DEFAULT');
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (7, 15, 8, 2, '2023-01-26 10:00:00.000000', DEFAULT, 'DEFAULT');
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (8, 9, 9, 3, '2023-01-26 11:00:00.000000', DEFAULT, 'DEFAULT');
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (9, 10, 10, 3, '2023-01-26 12:00:00.000000', DEFAULT, 'DEFAULT');
INSERT INTO `beauty_salon_db`.`record` (`id`, `user_id`, `master_has_service_id`, `status_id`, `time`, `mark`, `feedback`) VALUES (10, 11, 11, 3, '2023-01-26 13:00:00.000000', DEFAULT, 'DEFAULT');

COMMIT;